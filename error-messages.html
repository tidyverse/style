<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>9 Error messages | The tidyverse style guide</title>
<meta name="author" content="Hadley Wickham">
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="9 Error messages | The tidyverse style guide">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="9 Error messages | The tidyverse style guide">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-115082821-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<meta name="description" content="An error message should start with a general statement of the problem then give a concise description of what went wrong. Consistent use of punctuation and formatting makes errors easier to parse....">
<meta property="og:description" content="An error message should start with a general statement of the problem then give a concise description of what went wrong. Consistent use of punctuation and formatting makes errors easier to parse....">
<meta name="twitter:description" content="An error message should start with a general statement of the problem then give a concise description of what went wrong. Consistent use of punctuation and formatting makes errors easier to parse....">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The tidyverse style guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li class="book-part">Analyses</li>
<li><a class="" href="files.html"><span class="header-section-number">1</span> Files</a></li>
<li><a class="" href="syntax.html"><span class="header-section-number">2</span> Syntax</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">3</span> Functions</a></li>
<li><a class="" href="pipes.html"><span class="header-section-number">4</span> Pipes</a></li>
<li><a class="" href="ggplot2.html"><span class="header-section-number">5</span> ggplot2</a></li>
<li class="book-part">Packages</li>
<li><a class="" href="package-files.html"><span class="header-section-number">6</span> Files</a></li>
<li><a class="" href="documentation.html"><span class="header-section-number">7</span> Documentation</a></li>
<li><a class="" href="tests.html"><span class="header-section-number">8</span> Tests</a></li>
<li><a class="active" href="error-messages.html"><span class="header-section-number">9</span> Error messages</a></li>
<li><a class="" href="news.html"><span class="header-section-number">10</span> News</a></li>
<li><a class="" href="gitgithub.html"><span class="header-section-number">11</span> Git/GitHub</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/tidyverse/style">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="error-messages" class="section level1" number="9">
<h1>
<span class="header-section-number">9</span> Error messages<a class="anchor" aria-label="anchor" href="#error-messages"><i class="fas fa-link"></i></a>
</h1>
<p>An error message should start with a general statement of the problem then give a concise description of what went wrong.
Consistent use of punctuation and formatting makes errors easier to parse.</p>
<p>This guide assumes that you’re using <code><a href="https://cli.r-lib.org/reference/cli_abort.html">cli::cli_abort()</a></code>.
We are transitioning to use this function in the tidyverse because it:</p>
<ul>
<li>Makes it easy to generate bulleted lists.</li>
<li>Uses glue style interpolation to insert data into the error.</li>
<li>Supports a wide range of <a href="https://cli.r-lib.org/reference/inline-markup.html">inline markup</a>.</li>
<li>Provides convenient tools to <a href="https://rlang.r-lib.org/reference/topic-error-chaining.html">chain errors together</a>.</li>
<li>Can control the <a href="https://rlang.r-lib.org/reference/topic-error-call.html">name of the function</a> shown in the error.</li>
</ul>
<p>Much of the advice in this guide still applies if you’re using <code><a href="https://rdrr.io/r/base/stop.html">stop()</a></code>, but it will be be much more work to generate the message.</p>
<!--# Need a brief description of the overall structure of an error here, as a guide to the following sections -->
<div id="problem-statement" class="section level2" number="9.1">
<h2>
<span class="header-section-number">9.1</span> Problem statement<a class="anchor" aria-label="anchor" href="#problem-statement"><i class="fas fa-link"></i></a>
</h2>
<p>Every error message should start with a general statement of the problem.
It should be concise, but informative (This is hard!).
The problem statement should use sentence case and end with a full stop.</p>
<ul>
<li>
<p>If the cause of the problem is clear (e.g. an incorrect type or size), use “<strong>must</strong>”:</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">nth</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="st">"x"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! `n` must be a numeric vector, not a character vector.</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">nth</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! `n` must have length 1, not length 2.</span></span></code></pre></div>
<p>Do your best to tell the user both what is expected (“a numeric vector”) and what they actually provided (“a character vector”).</p>
</li>
<li>
<p>If you cannot state what was expected, use “<strong>can’t</strong>”:</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu">pull</span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Can't find column `b` in `.data`.</span></span>
<span></span>
<span><span class="fu">as_vector</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/environment.html">environment</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Can't coerce `.x` to a vector.</span></span>
<span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu">modify_depth</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fl">3</span>, <span class="op">~</span> <span class="va">.</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Can't find specified `.depth` in `.x`.</span></span></code></pre></div>
</li>
</ul>
<!--# Are there other forms that we use? Would be good to have some examples -->
</div>
<div id="error-location" class="section level2" number="9.2">
<h2>
<span class="header-section-number">9.2</span> Error location<a class="anchor" aria-label="anchor" href="#error-location"><i class="fas fa-link"></i></a>
</h2>
<p>Ideally the error message should mention the failing function call.</p>
<!--# I think it'd be useful to include a small example here -->
<p>See <a href="https://rlang.r-lib.org/reference/topic-error-call.html" class="uri">https://rlang.r-lib.org/reference/topic-error-call.html</a> for more about how to pass calls through error helpers.</p>
</div>
<div id="error-details" class="section level2" number="9.3">
<h2>
<span class="header-section-number">9.3</span> Error details<a class="anchor" aria-label="anchor" href="#error-details"><i class="fas fa-link"></i></a>
</h2>
<p>After the problem statement, use a bulleted list to provide further information.
Use cross bullets (<code>x</code>) to let the user know what the problem is, then use info bullets (<code>i</code>) to provide contextual information.
These are easy to create with <code>cli_abort()</code>: <!--# Include brief example here --></p>
<!--# Can you reorganise to show cross bullets then info bullets -->
<p>Try to keep the sentences short and sweet:</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Good</span></span>
<span><span class="fu">vec_slice</span><span class="op">(</span><span class="va">letters</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; ! Can't subset elements past the end.</span></span>
<span><span class="co">#&gt; ℹ Location 100 doesn't exist.</span></span>
<span><span class="co">#&gt; ℹ There are only 26 elements.</span></span>
<span></span>
<span><span class="co"># Bad</span></span>
<span><span class="fu">vec_slice</span><span class="op">(</span><span class="va">letters</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; ! Must index an existing element.</span></span>
<span><span class="co">#&gt; There are 26 elements and you've tried to subset element 100.</span></span></code></pre></div>
<p>Do your best to reveal the location, name, and/or content of the troublesome component of the input.
The goal is to make it as easy as possible for the user to find and fix the problem.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Good</span></span>
<span><span class="fu">map_int</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">~</span> <span class="st">"x"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Each result must be a single integer.</span></span>
<span><span class="co">#&gt; ✖ Result 1 is a character vector.</span></span>
<span></span>
<span><span class="co"># Bad</span></span>
<span><span class="fu">map_int</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">~</span> <span class="st">"x"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Each result must be a single integer</span></span></code></pre></div>
<p>(It is often not easy to identify the exact problem; it may require passing around extra arguments so that error messages generated at a lower-level can know the original source. For frequently used functions, the effort is typically worth it.)</p>
<p>If the source of the error is unclear, avoid pointing the user in the wrong direction by giving an opinion about the source of the error:</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Good</span></span>
<span><span class="fu">pull</span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">b</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Can't find column `b` in `.data`.</span></span>
<span></span>
<span><span class="fu">tibble</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, z <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Tibble columns must have compatible sizes.</span></span>
<span><span class="co">#&gt; • Size 2: Existing data.</span></span>
<span><span class="co">#&gt; • Size 3: Column `y`.</span></span>
<span><span class="co">#&gt; ℹ Only values of size one are recycled.</span></span>
<span></span>
<span><span class="co"># Bad: implies one argument at fault</span></span>
<span><span class="fu">pull</span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">b</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Column `b` must exist in `.data`.</span></span>
<span></span>
<span><span class="fu">pull</span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">b</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! `.data` must contain column `b`.</span></span>
<span></span>
<span><span class="fu">tibble</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, z <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Column `x` must be length 1 or 3, not 2.</span></span></code></pre></div>
<p>If there are multiple issues, or an inconsistency revealed across several arguments or items, prefer a bulleted list:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Good</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu">reduce2</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="va">`+`</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! `.x` and `.y` must have compatible lengths:</span></span>
<span><span class="co">#&gt; ✖ `.x` has length 4</span></span>
<span><span class="co">#&gt; ✖ `.y` has length 2</span></span>
<span></span>
<span><span class="co"># Bad: harder to scan</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu">reduce2</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="va">`+`</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! `.x` and `.y` must have compatible lengths: `.x` has length 4 and</span></span>
<span><span class="co">#&gt; `.y` has length 2</span></span></code></pre></div>
<p>If the list of issues might be long, make sure to truncate to only show the first few:</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Good</span></span>
<span><span class="co">#&gt; Error: NAs found at 1,000,000 locations: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...</span></span></code></pre></div>
<p>If you want to correctly pluralise the error message, consider using <code><a href="https://rdrr.io/r/base/gettext.html">ngettext()</a></code>.
See the notes in <code>?ngettext()</code> for some challenges related to correct translation to other languages.</p>
</div>
<div id="hints" class="section level2" number="9.4">
<h2>
<span class="header-section-number">9.4</span> Hints<a class="anchor" aria-label="anchor" href="#hints"><i class="fas fa-link"></i></a>
</h2>
<p>If the source of the error is clear and common, you may want to provide a hint as to how to fix it.
The hint should be the last bullet, use an info bullet (<code>i</code>), and end in a question mark.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="va">iris</span>, Species <span class="op">=</span> <span class="st">"setosa"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Filter specifications must be named.</span></span>
<span><span class="co">#&gt; ℹ Did you mean `Species == "setosa"`?</span></span>
<span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">aes</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Can't plot data with class "uneval".</span></span>
<span><span class="co">#&gt; ℹ Did you accidentally provide the results of aes() to the `data` argument?</span></span>
<span></span>
<span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `validate_mapping()`:</span></span>
<span><span class="co">#&gt; ! `mapping` must be created by `aes()`.</span></span>
<span><span class="co">#&gt; ℹ Did you use `%&gt;%` or `|&gt;` instead of `+`?</span></span></code></pre></div>
<p>Hints are particularly important if the source of the error is far away from the root cause:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Bad</span></span>
<span><span class="va">mean</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! object of type 'closure' is not subsettable</span></span>
<span></span>
<span><span class="co"># BETTER</span></span>
<span><span class="va">mean</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Can't subset a function.</span></span>
<span></span>
<span><span class="co"># BEST</span></span>
<span><span class="va">mean</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Can't subset a function.</span></span>
<span><span class="co">#&gt; ℹ Have you forgotten to define a variable named `mean`?</span></span></code></pre></div>
<p>Good hints are difficult to write because you want to avoid steering users in the wrong direction.
Generally, we avoid writing a hint unless the problem is common, and you can easily find a common pattern of incorrect usage (e.g. by searching StackOverflow).</p>
</div>
<div id="punctuation" class="section level2" number="9.5">
<h2>
<span class="header-section-number">9.5</span> Punctuation<a class="anchor" aria-label="anchor" href="#punctuation"><i class="fas fa-link"></i></a>
</h2>
<!--# This should be spread amongst the relevant sections. -->
<ul>
<li><p>Errors should be written in sentence case, and should end in a full stop.
Bullets should be formatted similarly; make sure to capitalise the first word (unless it’s an argument or column name).</p></li>
<li>
<p>Prefer the singular in problem statements:</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Good</span></span>
<span><span class="fu">map_int</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="op">~</span> <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Each result must be coercible to a single integer.</span></span>
<span><span class="co">#&gt; ✖ Result 1 is a character vector.</span></span>
<span></span>
<span><span class="co"># Bad</span></span>
<span><span class="fu">map_int</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="op">~</span> <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Results must be coercible to single integers.</span></span>
<span><span class="co">#&gt; ✖ Result 1 is a character vector.</span></span></code></pre></div>
</li>
<li>
<p>If you can detect multiple problems, list up to five.
This allows the user to fix multiple problems in a single pass without being overwhelmed by many errors that may have the same source.</p>
<!--# Mention cli helper here -->
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># BETTER</span></span>
<span><span class="fu">map_int</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">~</span> <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! Each result must be coercible to a single integer.</span></span>
<span><span class="co">#&gt; ✖ Result 1 is a character vector</span></span>
<span><span class="co">#&gt; ✖ Result 2 is a character vector</span></span>
<span><span class="co">#&gt; ✖ Result 3 is a character vector</span></span>
<span><span class="co">#&gt; ✖ Result 4 is a character vector</span></span>
<span><span class="co">#&gt; ✖ Result 5 is a character vector</span></span>
<span><span class="co">#&gt; ... and 5 more problems</span></span></code></pre></div>
</li>
<li><p>Pick a natural connector between problem statement and error location: this may be “, not”, “;”, or “:” depending on the context.</p></li>
<li><p>Surround the names of arguments in backticks, e.g. <code>`x`</code>.
Use “column” to disambiguate columns and arguments: <code>Column `x`</code>.
Avoid “variable”, because it is ambiguous.
<!--# Needs to be updated to refer to cli inline formatting --></p></li>
<li><p>Ideally, each component of the error message should be less than 80 characters wide.
Do not add manual line breaks to long error messages; they will not look correct if the console is narrower (or much wider) than expected.
Instead, use bullets to break up the error into shorter logical components.
In case you do need longer sentences, let cli perform paragraph wrapping automatically.
It inserts newlines automatically depending on the width of the console.</p></li>
</ul>
</div>
<div id="before-and-after" class="section level2" number="9.6">
<h2>
<span class="header-section-number">9.6</span> Before and after<a class="anchor" aria-label="anchor" href="#before-and-after"><i class="fas fa-link"></i></a>
</h2>
<p>More examples gathered from around the tidyverse.</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">cyl</span><span class="op">)</span></span>
<span><span class="co">#&gt; BEFORE:</span></span>
<span><span class="co">#&gt; ! Argument 2 filter condition does not evaluate to a logical vector.</span></span>
<span></span>
<span><span class="co">#&gt; AFTER:</span></span>
<span><span class="co">#&gt; ! Each argument must be a logical vector.</span></span>
<span><span class="co">#&gt; * Argument 2 (`cyl`) is an integer vector.</span></span>
<span></span>
<span><span class="fu">tibble</span><span class="fu">::</span><span class="fu">tribble</span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span></span>
<span><span class="co">#&gt; BEFORE: ! Expected at least one column name; e.g. `~name`</span></span>
<span><span class="co">#&gt;  AFTER: ! Must supply at least one column name, e.g. `~name`.</span></span>
<span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">geom_line</span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">cut</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; BEFORE: ! geom_line requires the following missing aesthetics: y</span></span>
<span><span class="co">#&gt;  AFTER: ! `geom_line()` must have the following aesthetics: `y`.</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">rename</span><span class="op">(</span><span class="va">mtcars</span>, cyl <span class="op">=</span> <span class="va">xxx</span><span class="op">)</span></span>
<span><span class="co">#&gt; BEFORE: ! `xxx` contains unknown variables</span></span>
<span><span class="co">#&gt;  AFTER: ! Can't find column `xxx` in `.data`.</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu">arrange</span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">xxx</span><span class="op">)</span></span>
<span><span class="co">#&gt; BEFORE: ! Evaluation error: object 'xxx' not found.</span></span>
<span><span class="co">#&gt;  AFTER: ! Can't find column `xxx` in `.data`.</span></span></code></pre></div>
</div>
<div id="localisation" class="section level2" number="9.7">
<h2>
<span class="header-section-number">9.7</span> Localisation<a class="anchor" aria-label="anchor" href="#localisation"><i class="fas fa-link"></i></a>
</h2>
<p>It is encouraged to be as informative as possible, but each sentence should be very simple to make localisation and translation possible.
<a href="https://metacpan.org/pod/distribution/Locale-Maketext/lib/Locale/Maketext/TPJ13.pod">A Localization Horror Story: It Could Happen To You</a> is a Good summary of the challenges of localising error messages.
You might not support localised messages right now but you should make it as easy as possible to do it in the future.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="tests.html"><span class="header-section-number">8</span> Tests</a></div>
<div class="next"><a href="news.html"><span class="header-section-number">10</span> News</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#error-messages"><span class="header-section-number">9</span> Error messages</a></li>
<li><a class="nav-link" href="#problem-statement"><span class="header-section-number">9.1</span> Problem statement</a></li>
<li><a class="nav-link" href="#error-location"><span class="header-section-number">9.2</span> Error location</a></li>
<li><a class="nav-link" href="#error-details"><span class="header-section-number">9.3</span> Error details</a></li>
<li><a class="nav-link" href="#hints"><span class="header-section-number">9.4</span> Hints</a></li>
<li><a class="nav-link" href="#punctuation"><span class="header-section-number">9.5</span> Punctuation</a></li>
<li><a class="nav-link" href="#before-and-after"><span class="header-section-number">9.6</span> Before and after</a></li>
<li><a class="nav-link" href="#localisation"><span class="header-section-number">9.7</span> Localisation</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/tidyverse/style/blob/master/errors.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/tidyverse/style/edit/master/errors.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The tidyverse style guide</strong>" was written by Hadley Wickham. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
