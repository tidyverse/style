<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The tidyverse style guide</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="The tidyverse style guide">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="The tidyverse style guide" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="tidyverse/style" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The tidyverse style guide" />
  
  
  

<meta name="author" content="Hadley Wickham">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="functions.html">


<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Style Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>1</b> Files</a><ul>
<li class="chapter" data-level="1.1" data-path="files.html"><a href="files.html#names"><i class="fa fa-check"></i><b>1.1</b> Names</a></li>
<li class="chapter" data-level="1.2" data-path="files.html"><a href="files.html#structure"><i class="fa fa-check"></i><b>1.2</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="syntax.html"><a href="syntax.html"><i class="fa fa-check"></i><b>2</b> Syntax</a><ul>
<li class="chapter" data-level="2.1" data-path="syntax.html"><a href="syntax.html#object-names"><i class="fa fa-check"></i><b>2.1</b> Object names</a></li>
<li class="chapter" data-level="2.2" data-path="syntax.html"><a href="syntax.html#spacing"><i class="fa fa-check"></i><b>2.2</b> Spacing</a></li>
<li class="chapter" data-level="2.3" data-path="syntax.html"><a href="syntax.html#argument-names"><i class="fa fa-check"></i><b>2.3</b> Argument names</a></li>
<li class="chapter" data-level="2.4" data-path="syntax.html"><a href="syntax.html#indenting"><i class="fa fa-check"></i><b>2.4</b> Indenting</a></li>
<li class="chapter" data-level="2.5" data-path="syntax.html"><a href="syntax.html#long-lines"><i class="fa fa-check"></i><b>2.5</b> Long lines</a></li>
<li class="chapter" data-level="2.6" data-path="syntax.html"><a href="syntax.html#assignment"><i class="fa fa-check"></i><b>2.6</b> Assignment</a></li>
<li class="chapter" data-level="2.7" data-path="syntax.html"><a href="syntax.html#semicolons"><i class="fa fa-check"></i><b>2.7</b> Semicolons</a></li>
<li class="chapter" data-level="2.8" data-path="syntax.html"><a href="syntax.html#quotes"><i class="fa fa-check"></i><b>2.8</b> Quotes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a><ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#naming"><i class="fa fa-check"></i><b>3.1</b> Naming</a></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#long-lines-1"><i class="fa fa-check"></i><b>3.2</b> Long lines</a></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#return"><i class="fa fa-check"></i><b>3.3</b> <code>return()</code></a></li>
<li class="chapter" data-level="3.4" data-path="functions.html"><a href="functions.html#comments"><i class="fa fa-check"></i><b>3.4</b> Comments</a></li>
<li class="chapter" data-level="3.5" data-path="functions.html"><a href="functions.html#design"><i class="fa fa-check"></i><b>3.5</b> Design</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>4</b> Pipes</a><ul>
<li class="chapter" data-level="4.1" data-path="pipes.html"><a href="pipes.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="pipes.html"><a href="pipes.html#spacing-and-indenting"><i class="fa fa-check"></i><b>4.2</b> Spacing and indenting</a></li>
<li class="chapter" data-level="4.3" data-path="pipes.html"><a href="pipes.html#no-arguments"><i class="fa fa-check"></i><b>4.3</b> No arguments</a></li>
<li class="chapter" data-level="4.4" data-path="pipes.html"><a href="pipes.html#long-lines-2"><i class="fa fa-check"></i><b>4.4</b> Long lines</a></li>
<li class="chapter" data-level="4.5" data-path="pipes.html"><a href="pipes.html#assignment-1"><i class="fa fa-check"></i><b>4.5</b> Assignment</a></li>
<li class="chapter" data-level="4.6" data-path="pipes.html"><a href="pipes.html#comments-1"><i class="fa fa-check"></i><b>4.6</b> Comments</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The tidyverse style guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pipes" class="section level1">
<h1><span class="header-section-number">4</span> Pipes</h1>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">4.1</span> Introduction</h2>
<p>Use <code>%&gt;%</code> when you find yourself composing more than three or more functions together into a nested call, or creating intermediate objects that you don’t care about.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good</span>
foo_foo %&gt;%
<span class="st">  </span><span class="kw">hop</span>(<span class="dt">through =</span> forest) %&gt;%
<span class="st">  </span><span class="kw">scoop</span>(<span class="dt">up =</span> field_mouse) %&gt;%
<span class="st">  </span><span class="kw">bop</span>(<span class="dt">on =</span> head)

<span class="co"># Bad</span>
foo_foo &lt;-<span class="st"> </span><span class="kw">hop</span>(foo_foo, <span class="dt">through =</span> forest)
foo_foo &lt;-<span class="st"> </span><span class="kw">scoop</span>(foo_foo, <span class="dt">up =</span> field_mice)
foo_foo &lt;-<span class="st"> </span><span class="kw">bop</span>(foo_foo, <span class="dt">on =</span> head)

<span class="co"># Bad</span>
<span class="kw">bop</span>(
  <span class="kw">scoop</span>(
    <span class="kw">hop</span>(foo_foo, <span class="dt">through =</span> forest),
    <span class="dt">up =</span> field_mice
  ),
  <span class="dt">on =</span> head
)</code></pre></div>
<p>(If you’re not familiar with Litte )</p>
<p>Avoid using the pipe when:</p>
<ul>
<li><p>You need to manipulate more than one object at a time. Reserve pipes for a sequence of steps applied to one primary object.</p></li>
<li><p>There are meaningful intermediate objects that could be given informative names.</p></li>
</ul>
</div>
<div id="spacing-and-indenting" class="section level2">
<h2><span class="header-section-number">4.2</span> Spacing and indenting</h2>
<p><code>%&gt;%</code> should always have a space before it and a new line after it. After the first step, each line should be indented by two spaces.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good</span>
iris %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(Species) %&gt;%
<span class="st">  </span><span class="kw">summarize_if</span>(<span class="kw">is.numeric</span>(), mean) %&gt;%
<span class="st">  </span><span class="kw">ungroup</span>() %&gt;%
<span class="st">  </span><span class="kw">gather</span>(measure, value, -Species) %&gt;%
<span class="st">  </span><span class="kw">arrange</span>(value)

<span class="co"># Bad</span>
iris %&gt;%<span class="st"> </span><span class="kw">group_by</span>(Species) %&gt;%<span class="st"> </span><span class="kw">summarize_all</span>(mean) %&gt;%
ungroup %&gt;%<span class="st"> </span><span class="kw">gather</span>(measure, value, -Species) %&gt;%
<span class="kw">arrange</span>(value)</code></pre></div>
<p>It is ok to keep a one-step pipe on one line, although depending on the context, you may want to rewrite to remove the pipe.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># good</span>
iris %&gt;%<span class="st"> </span><span class="kw">arrange</span>(Petal.Width)
<span class="kw">arrange</span>(iris, Petal.Width)</code></pre></div>
</div>
<div id="no-arguments" class="section level2">
<h2><span class="header-section-number">4.3</span> No arguments</h2>
<p>magrittr allows you to omit <code>()</code> on functions that don’t have arguments. Avoid this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good</span>
x %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">unique</span>() %&gt;%
<span class="st">  </span><span class="kw">sort</span>()

<span class="co"># Bad</span>
x %&gt;%<span class="st"> </span>
<span class="st">  </span>unique %&gt;%
<span class="st">  </span>sort</code></pre></div>
</div>
<div id="long-lines-2" class="section level2">
<h2><span class="header-section-number">4.4</span> Long lines</h2>
<p>If the arguments to a function don’t all fit on one line, put each argument on its own line and indent:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(Species) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">Sepal.Length =</span> <span class="kw">mean</span>(Sepal.Length),
    <span class="dt">Sepal.Width =</span> <span class="kw">mean</span>(Sepal.Width),
    <span class="dt">Sepcies =</span> <span class="kw">n_distinct</span>(Species)
  )</code></pre></div>
</div>
<div id="assignment-1" class="section level2">
<h2><span class="header-section-number">4.5</span> Assignment</h2>
<p>You can use to use <code>-&gt;</code> to create an object at the end of the pipe.</p>
<p>Personally, I think you should avoid this technique. While starting with the assignment is a little more work when writing the code, it makes reading the code easier. This is because the name acts as a heading, which reminds you of the purpose of the pipe.</p>
</div>
<div id="comments-1" class="section level2">
<h2><span class="header-section-number">4.6</span> Comments</h2>
<p>In data analysis code, use comments to record important findings and analysis decisions. If you need comments to explain what your code is doing, consider rewriting your code to be clearer. If you discover that you have more comments than code, considering switching to RMarkdown.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functions.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>


<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tidyverse/style/edit/master/04-pipes.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
